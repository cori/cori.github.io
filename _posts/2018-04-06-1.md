---
layout: no-title-post
date: 2018-04-06 08:27 -0500
---
[](){:#a961}Finally have a working prototype scaleset for Elasticesearch 1.7 running in Azure. Oddities:

1. While the config trigger is being handled in terraform with a VM Extension, it still relies on a Bash script running in the context of the VM being created to set itself up.
1. The Bash script is currently being served via a private gist. I would rather serve it from an Azure storage account but haven't yet discovered how to authenticate access to a single file.

Hopefully Consul will be able to address the service discovery concern, since right now the ES zen discovery addressing is dynamically hard-coded. It's possible there's a way to handle that "internally", but so far I haven't been able to find a way to access scaleset instance information during the startup process, and so am needing to gather that information in Bash when the VM starts up.  [#](#a961)


